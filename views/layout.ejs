<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title><%= title %> • Agile Articles</title>

  <!-- Tailwind CSS via CDN with Typography, Forms, Aspect Ratio, and Line Clamp plugins -->
  <script src="https://cdn.tailwindcss.com?plugins=typography,forms,aspect-ratio,line-clamp"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#eff6ff',
              100: '#dbeafe',
              600: '#2563eb',
              700: '#1d4ed8'
            }
          }
        }
      }
    }
  </script>
  <meta name="description" content="<%= (typeof description !== 'undefined' && description) ? description : 'Agile ways of working — a curated set of articles.' %>" />
  <% if (typeof baseHref !== 'undefined' && baseHref) { %>
    <base href="<%= baseHref %>">
  <% } %>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900 selection:bg-brand-100 selection:text-brand-700 dark:bg-slate-900 dark:text-slate-100">
  <header class="sticky top-0 z-20 border-b border-slate-200 bg-white/80 backdrop-blur dark:border-slate-700 dark:bg-slate-900/80">
    <div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between">
      <a href="/" class="flex items-center gap-2">
        <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-brand-600 to-blue-400 text-white font-bold">A</span>
        <span class="text-lg font-semibold tracking-tight">Agile Articles</span>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm text-slate-600 dark:text-slate-300">
        <a class="hover:text-slate-900 dark:hover:text-white" href="/">Home</a>
        <button id="theme-toggle" type="button" class="inline-flex items-center gap-2 rounded-lg border border-slate-300 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800" aria-label="Toggle dark mode">
          <svg id="icon-sun" class="h-4 w-4 hidden" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm0 4a1 1 0 0 0 1-1v-1.05a1 1 0 1 0-2 0V21a1 1 0 0 0 1 1Zm0-18a1 1 0 0 0 1-1V2a1 1 0 1 0-2 0v1a1 1 0 0 0 1 1Zm10 9a1 1 0 0 0-1-1h-1.05a1 1 0 1 0 0 2H21a1 1 0 0 0 1-1ZM4.05 12a1 1 0 1 0 0-2H3a1 1 0 1 0 0 2h1.05ZM18.364 18.364a1 1 0 0 0 0-1.414l-.743-.743a1 1 0 1 0-1.414 1.414l.743.743a1 1 0 0 0 1.414 0ZM7.793 7.793a1 1 0 0 0 0-1.414l-.743-.743A1 1 0 1 0 5.636 7.05l.743.743a1 1 0 0 0 1.414 0Zm8.828-2.157a1 1 0 0 0-1.414 0l-.743.743a1 1 0 1 0 1.414 1.414l.743-.743a1 1 0 0 0 0-1.414ZM7.05 18.364a1 1 0 0 0 0-1.414l-.743-.743A1 1 0 1 0 4.893 17.62l.743.743a1 1 0 0 0 1.414 0Z"/></svg>
          <svg id="icon-moon" class="h-4 w-4 hidden" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 1 0 9.79 9.79Z"/></svg>
          <span class="sr-only">Toggle theme</span>
        </button>
      </nav>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-10">
    <%- body %>
  </main>

  <footer class="mt-16 border-t border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-950">
    <div class="mx-auto max-w-6xl px-4 py-8 text-sm text-slate-500">
      <p>&copy; <span id="year"></span> Agile Articles. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Theme persistence
    (function () {
      const root = document.documentElement;
      const stored = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

      if (stored === 'dark' || (!stored && prefersDark)) {
        root.classList.add('dark');
        localStorage.setItem('theme', 'dark');
      } else {
        root.classList.remove('dark');
        localStorage.setItem('theme', 'light');
      }

      const btn = document.getElementById('theme-toggle');
      const sun = document.getElementById('icon-sun');
      const moon = document.getElementById('icon-moon');
      function renderIcons() {
        const isDark = root.classList.contains('dark');
        sun.classList.toggle('hidden', !isDark);
        moon.classList.toggle('hidden', isDark);
      }
      if (btn) {
        btn.addEventListener('click', () => {
          root.classList.toggle('dark');
          localStorage.setItem('theme', root.classList.contains('dark') ? 'dark' : 'light');
          renderIcons();
        });
        renderIcons();
      }
    })();
  </script>
</body>
</html>
